<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito - FrikBoys</title>
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="../CSS/PagCarrito.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
    <link rel="icon" href="../imagenes/Logo.png" type="image/png" />
</head>
<body>
    <!-- Contenido de Encabezado.html -->
    <div id="header-container"></div>

    <script>
        (async function loadHeader(){
            try{
                const res = await fetch('header.html');
                if(!res.ok) throw new Error('No se pudo cargar header');
                const html = await res.text();
                document.getElementById('header-container').innerHTML = html;
            }catch(err){
                console.error(err);
            }
        })();
    </script>

    <main>
        <h1>Carrito</h1>
        <div id="cart-container"></div>
    </main>

    <footer class="main-piepagina">
        <p>&copy; 2025 FrikBoys. Todos los derechos reservados.</p>
    </footer>

    <script src="../JS/main.js"></script>
    <script type="module">
        import { renderCart, updateCartBadge } from '../JS/cart.js';
        
        // Esperar a que el header se cargue antes de actualizar el badge
        async function loadHeaderAndRenderCart(){
            // Esperar a que el header esté en el DOM
            const headerContainer = document.getElementById('header-container');
            await new Promise((resolve) => {
                const checkHeader = setInterval(() => {
                    if(headerContainer.innerHTML.trim().length > 0){
                        clearInterval(checkHeader);
                        // Pequeño delay para asegurar que el #cart-count exista
                        setTimeout(resolve, 50);
                    }
                }, 10);
            });
            
            updateCartBadge();
            renderCart('cart-container');
        }
        
        document.addEventListener('DOMContentLoaded', loadHeaderAndRenderCart);
    </script>
</body>
</html>